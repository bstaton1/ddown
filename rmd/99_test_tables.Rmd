---
output: html_document
editor_options: 
  chunk_output_type: console
---

```{r, include = F}
library(dplyr)
library(knitr)
library(kableExtra)

knitr::opts_chunk$set(echo = F, message = F, warning = F)

# function to help split cells in tables
add_break = function(x) {
  
  x = stringr::str_split(x, "\\(") %>% unlist
  x = matrix(x, length(x)/2, 2, byrow = T)
  x[,2] = paste("(", x[,2], sep = "")
  x = apply(x, 1, function(z) paste(z, collapse = "\n"))
  kableExtra::linebreak(x, align = "c")
}
```

\singlespacing

```{r coefs-table}
tab = read.csv("tab/Ch2/Single Variable Regression Estimates.csv", stringsAsFactors = F)
model = toupper(tab$X)
tab$t = tab$slope/tab$slope.se
tab = tab[,c("intercept", "slope", "t", "r.sqr", "sigma", "f.stat")]
tab = round(tab, 2)
# tab = cbind(tab, c("*", "*", "**", "**"))
tab = cbind(model, tab)
tab[,"f.stat"] = paste(tab[,"f.stat"], footnote_marker_symbol(c(1,1,2,2), format = "latex"), sep = "")

colnames(tab)[1] = "Variable"
colnames(tab)[2] = "$\\boldsymbol{\\hat{\\beta}_0}$"
colnames(tab)[3] = "$\\boldsymbol{\\hat{\\beta}_1}$"
colnames(tab)[4] = "$\\boldsymbol{t}$"
colnames(tab)[5] = "$\\boldsymbol{R^2}$"
colnames(tab)[6] = "$\\boldsymbol{\\hat{\\sigma}}$"
colnames(tab)[7] = "$\\boldsymbol{F}$"

kable(tab, "latex", booktabs = T, escape = F,
             caption = "Estimates and statistics of the effects of each of the four single-variable forecast models fitted with all  $D_{50}$ and environmental data through 2018.", align = c("c")) %>%
  kable_styling(position = "center") %>%
  column_spec(column = 1, bold = T) %>%
  footnote(
    symbol_title = "Significance Codes",
    symbol = c("P < 0.01", "P < 0.001"))
```

